#pragma checksum "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\Modelos\Avance.cshtml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "aac2e2d01a1e874d40bd08c601bdc20640d2b45448242bab78dbd1076de33f3d"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Modelos_Avance), @"mvc.1.0.view", @"/Views/Modelos/Avance.cshtml")]
namespace AspNetCore
{
    #line hidden
    using global::System;
    using global::System.Collections.Generic;
    using global::System.Linq;
    using global::System.Threading.Tasks;
    using global::Microsoft.AspNetCore.Mvc;
    using global::Microsoft.AspNetCore.Mvc.Rendering;
    using global::Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\_ViewImports.cshtml"
using COSAPI.NETC.PGIB;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\_ViewImports.cshtml"
using COSAPI.NETC.PGIB.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"Sha256", @"aac2e2d01a1e874d40bd08c601bdc20640d2b45448242bab78dbd1076de33f3d", @"/Views/Modelos/Avance.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"Sha256", @"d3ff00ad2a56c4aaf88538e94b5dbc75bae147f384bc9b0396a119806ee172d3", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Modelos_Avance : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    #nullable disable
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("formArticulos1"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\Modelos\Avance.cshtml"
  
    ModeloResponse vl_Modelo = ViewBag.modelo;

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<style>
    .handleSelectionExtensionIcon {
        background-image: url(/img/dar_avance_white.png);
        background-size: 24px;
        background-repeat: no-repeat;
        background-position: center;
    }

</style>

<div class=""content"">
    <div class=""content h-100"">
        <div class=""row"">
            <div class=""col-md-6 "">
                <!-- Form inputs -->
                <div class=""card h-100"">
                    <div class=""card-header header-elements-inline"">
                        <h5 class=""card-title"">Modelo: </h5>
                        <div class=""header-elements"">
                            <div class=""list-icons"">
                                <a class=""list-icons-item"" data-action=""collapse""></a>
                                <a class=""list-icons-item"" data-action=""reload"" onclick=""CargarDatosIniciales()""></a>
                                <a class=""list-icons-item"" data-action=""remove""></a>
                            </div>
                 ");
            WriteLiteral(@"       </div>
                    </div>

                    <div class=""card-body "" style=""padding: 0px; height: 100vh"">
                        
                        <div class=""h-100"" id=""viewer""></div>
                    </div>
                </div>
            </div>
            <div class=""col-md-6"">
                <div class=""card h-100"">
                    <div class=""card-header header-elements-inline"">
                        <h5 class=""card-title"">Información del Modelo</h5>
                      
                        <div class=""header-elements"">
                            <div class=""list-icons"">
                                <a class=""list-icons-item"" data-action=""collapse""></a>
                                <a onclick=""ListarAvancesPorModelo()"" class=""list-icons-item"" data-action=""reload""></a>
                                <a class=""list-icons-item"" data-action=""remove""></a>
                            </div>
                        </div>
                ");
            WriteLiteral(@"    </div>


                    <div class=""card-body"">
                        <div class=""container-fluid"">
                            <div id=""table-responsive"">
                                <table id=""tabla"" class=""table table-bordered table-hover table-striped"">
                                    <thead>
                                        <tr>
                                            <th>ELEMENTO</th>
                                            <th>AVANCE</th>
                                            <th>ESTADO AVANCE</th>
                                            <th>FECHA EJECUTADA</th>
                                            <th>FECHA PLANIFICADA</th>
                                        </tr>
                                    </thead>
                                    <tbody id=""resultado"">
                                    </tbody>
                                </table>
                            </div>
                        </div>
          ");
            WriteLiteral(@"          </div>
                </div>
            </div>
        </div>

        <div id=""modalCRUD1"" class=""modal fade"" tabindex=""-1"" role=""dialog""
             aria-labelledby=""exampleModalLabel"" aria-hidden=""true"">
            <div class=""modal-dialog"" role=""document"">
                <div class=""modal-content"">
                    <div class=""modal-header"">
                        <h5 class=""modal-title"" id=""exampleModalLabel""></h5>
                    </div>
                    ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "aac2e2d01a1e874d40bd08c601bdc20640d2b45448242bab78dbd1076de33f3d7827", async() => {
                WriteLiteral("\r\n                        <div class=\"modal-body\">\r\n                            <input id=\"id\" hidden>\r\n\r\n                            <label");
                BeginWriteAttribute("for", " for=\"", 3795, "\"", 3801, 0);
                EndWriteAttribute();
                WriteLiteral(@" class=""col-form-label"">
                                AVANCE PARA LOS ELEMENTOS
                                SELECCIONADOS (en porcentaje de 0 a 10):
                            </label>
                            <input type=""number"" class=""form-control"" id=""txtAvance"" min=""0"" max=""10"">
                            <label");
                BeginWriteAttribute("for", " for=\"", 4137, "\"", 4143, 0);
                EndWriteAttribute();
                WriteLiteral(" class=\"col-form-label\">Estado avance:</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"txtEstadoAvance\">\r\n                            <label");
                BeginWriteAttribute("for", " for=\"", 4317, "\"", 4323, 0);
                EndWriteAttribute();
                WriteLiteral(" class=\"col-form-label\">Fecha Ejecutada</label>\r\n                            <input type=\"date\" class=\"form-control\" id=\"f_ejecucion\">\r\n                            <label");
                BeginWriteAttribute("for", " for=\"", 4494, "\"", 4500, 0);
                EndWriteAttribute();
                WriteLiteral(@" class=""col-form-label"">Fecha Planificada</label>
                            <input type=""date"" class=""form-control"" id=""f_planificada"">
                        </div>
                        <div class=""modal-footer"">
                            <button type=""button"" class=""btn btn-secondary""
                                    data-dismiss=""modal"">
                                Cancelar
                            </button>
                            <input type=""hidden"" name=""id_modelo"" id=""id_modelo""");
                BeginWriteAttribute("value", " value=\"", 5022, "\"", 5051, 1);
#nullable restore
#line 104 "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\Modelos\Avance.cshtml"
WriteAttributeValue("", 5030, vl_Modelo.idModelo, 5030, 21, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                            <button type=\"submit\" id=\"btnGuardar\" class=\"btn btn-dark\">Guardar</button>\r\n                        </div>\r\n                    ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        CargarDatosIniciales();
    });

    function CargarDatosIniciales(){
        var urn = '");
#nullable restore
#line 121 "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\Modelos\Avance.cshtml"
               Write(vl_Modelo.urn);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"';
        localStorage.setItem('urn', urn);
        var urn = localStorage.getItem(""urn"");
       
        GenerarToken();
        launchViewer(urn);
        ListarAvancesPorModelo();
    }


    function GenerarToken(){
        var token = """";
        var url = ""https://developer.api.autodesk.com/authentication/v1/authenticate"";
        var data = {
            ""client_id"": ""wIHjqGVk5Geso1ZGaLFpsqU0UiX7UP4j"",
            ""client_secret"": ""4nc2icC3F8fKlQkX"",
            ""grant_type"": ""client_credentials"",
            ""scope"": ""code:all data:write data:read bucket:create bucket:delete bucket:read""
        };
        $.ajax({
            url: url,
            type: ""POST"",
            data: data,
            success: function (data) {
                token = data.access_token;
                localStorage.setItem(""token"", 'Bearer ' + token);
            },
            error: function (data) {
                console.log(data);
            }
        });
    }

    function Lista");
            WriteLiteral("rAvancesPorModelo() {\r\n    \r\n        const idModelo = \'");
#nullable restore
#line 156 "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\Modelos\Avance.cshtml"
                      Write(vl_Modelo.idModelo);

#line default
#line hidden
#nullable disable
            WriteLiteral("\';\r\n        fetch(`");
#nullable restore
#line 157 "C:\Users\Computer\Desktop\pgib-cosapi\COSAPI.NETC.PGIB\COSAPI.NETC.PGIB\Views\Modelos\Avance.cshtml"
          Write(Url.Action("ListarAvancesPorModelo", "Modelos"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"?idModelo=${idModelo}`)
            .then(response => response.json())
            .then(data => {
                console.dir(data);
                var resultado = '';

                for (var i in data) {
                    var item = data[i];
                    resultado += `
                        <tr>
                                <td> ${item.elemento} </td>
                                <td> ${item.avance} </td>
                                <td> ${item.e_avance} </td>
                                <td> ${item.f_ejecucion} </td>
                                <td> ${item.f_planificada} </td>
                        </tr>
                    `;
                }

               
                fnDestruirTabla('tabla');
                $('#resultado').html(resultado);
                fnCrearDataTable('tabla');
            })
            .catch(error => console.error('Error:', error));
    }

    function fnDestruirTabla(id) {
        $('#' + id).DataTable().destr");
            WriteLiteral(@"oy();
    }

    function fnCrearDataTable(id) {
        $('#' + id).DataTable({
            language: {
                ""lengthMenu"": ""Mostrar _MENU_ registros"",
                ""zeroRecords"": ""No se encontraron resultados"",
                ""info"": ""Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros"",
                ""infoEmpty"": ""Mostrando registros del 0 al 0 de un total de 0 registros"",
                ""infoFiltered"": ""(filtrado de un total de _MAX_ registros)"",
                ""sSearch"": ""Buscar:"",
                ""oPaginate"": {
                    ""sFirst"": ""Primero"",
                    ""sLast"": ""Último"",
                    ""sNext"": ""Siguiente"",
                    ""sPrevious"": ""Anterior""
                },
                ""sProcessing"": ""Procesando...""
            },
            responsive: ""true"",
            retrieve: true
        });
    }
</script>");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
